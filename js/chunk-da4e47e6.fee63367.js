(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da4e47e6"],{"33f8":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("b-modal",{attrs:{id:"modal-2",title:"Información","ok-only":"","ok-title":"Aceptar","no-close-on-esc":"","no-close-on-backdrop":"","header-bg-variant":"dark","header-text-variant":"light"}},[t("p",{staticStyle:{"font-size":"1rem"}},[e._v(" Lo invitamos a que programe la toma de muestras a domicilio a través de Nuestra agente virtual Angela o por nuestra página web "),t("a",{attrs:{href:"https://www.alianzadiagnostica.com/usuarios/toma-de-muestras-a-domicilio",target:"blank"}},[e._v("https://www.alianzadiagnostica.com")])])]),t("b-modal",{attrs:{"hide-header-close":"",id:"modal-4",title:"Error confirmando reserva","ok-only":"","ok-title":"Cerrar","no-close-on-esc":"","no-close-on-backdrop":"","header-bg-variant":"dark","header-text-variant":"light"},on:{ok:function(t){return e.hideModalConfirmation()}}},[t("p",{staticStyle:{"font-size":"1rem"}},[e._v(" Ha ocurrido un error al confirmar la reserva. Por favor ingrese de nuevo los datos o intente más tarde. ")])]),t("b-modal",{ref:"modal-confirmation",attrs:{id:"modal-3",title:"Reserva Exitosa","no-close-on-esc":"","no-close-on-backdrop":"","header-bg-variant":"dark","header-text-variant":"light"},on:{close:function(t){return e.hideModalConfirmation()}},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[t("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.hideModalConfirmation()}}},[e._v(" Aceptar ")])]},proxy:!0}])},[t("p",{staticClass:"text-justify"},[e._v(" Reserva confirmada en la sede "),t("b",[e._v(e._s(e.confirmDataReserve.placeName))]),e._v(", para el día "),t("b",[e._v(e._s(this.$moment(e.confirmDataReserve.date).locale("es-mx").format("LL")))]),e._v(" en el horario de "),t("b",[e._v(e._s(e.confirmDataReserve.schedule))])]),t("p",{staticClass:"text-justify",staticStyle:{"font-size":"1rem",color:"red"}},[t("b",[e._v("Le recordamos que deberá asistir a su toma de muestra máximo 10 minutos antes de la hora asignada y el tiempo de atención estimado es de 30 minutos")])]),t("p",{staticClass:"text-justify",staticStyle:{"font-size":"1rem"}},[e._v(" Señor usuario, recuerde llegar a la hora de su "),t("span",{staticStyle:{"font-weight":"bolder"}},[e._v("cita asignada")]),e._v(", para mantener el distanciamiento social y el cumplimiento de las medidas de la emergencia sanitaria Covid 19. ")]),t("p",{staticClass:"text-justify",staticStyle:{"font-size":"1rem"}},[e._v(" Recuerde presentar en físico los siguientes documentos: "),t("br"),t("ul",[t("li",[e._v("Documento de identidad")]),t("li",[e._v("Orden médica (Si aplica)")]),t("li",[e._v("Autorización médica vigente (Si aplica)")]),t("li",[e._v("Historia Clínica (Si aplica)")])])]),t("p",{staticClass:"text-justify",staticStyle:{"font-size":"1.1rem",color:"red"}},[t("b",[e._v("Importante:")]),e._v(" Por favor consulte la preparación de sus exámenes de laboratorio clínico en el siguiente enlace "),t("a",{attrs:{target:"_blank",href:"https://www.alianzadiagnostica.com/examenes"}},[e._v("https://www.alianzadiagnostica.com/examenes")])])]),e.errorReserve?e._e():t("b-container",[t("b-row",{staticClass:"mt-2"},[t("b-col",{staticStyle:{"font-size":"1rem"}},[t("p",{staticClass:"text-justify"},[e._v(" "+e._s(e.nomUser)+", se realizará reserva en la sede "),t("b",[e._v(e._s(e.placeAdress))]),e._v(", para el día "),t("b",[e._v(e._s(this.$moment(e.dateSelected).locale("es-mx").format("LL")))]),e._v(" en el horario de "),t("b",[e._v(e._s(e.scheduleSelected))])]),t("p",{staticClass:"text-justify"},[t("b",[e._v("Le recordamos que deberá asistir a su toma de muestra máximo 10 minutos antes de la hora asignada y el tiempo de atención estimado es de 30 minutos")])]),e.showPreguntas?t("p",{staticClass:"text-justify"},[e._v(" Para finalizar marque "),t("b",[e._v("Si")]),e._v(", "),t("b",[e._v("No")]),e._v(" o llene los valores en las siguientes preguntas y de click en el botón Confirmar ")]):e._e()])],1),t("b-row",[t("b-col",[e.isBussy?t("b-icon",{attrs:{icon:"arrow-clockwise",animation:"spin","font-scale":"4"}}):e._e()],1)],1),e.showPreguntas?t("b-row",[t("b-col",[t("b-table",{attrs:{hover:"",bordered:"",items:e.preguntas,small:"","table-variant":"primary","head-variant":"dark",fields:e.fields},scopedSlots:e._u([{key:"cell(text)",fn:function(a){return[t("p",{staticClass:"text-justify",staticStyle:{"font-size":"1rem"}},[e._v(" "+e._s(a.value)+" ")])]}},{key:"cell(respuesta)",fn:function(a){return["8"==a.item.id?t("b-container",{staticClass:"mt-1"},[t("b-row",[t("b-col",[t("b-form-input",{attrs:{placeholder:"Enter your name"},on:{blur:function(t){return e.marcarrta8(a.item.id-1)}},model:{value:e.rta8,callback:function(t){e.rta8=t},expression:"rta8"}})],1)],1)],1):e._e(),"11"==a.item.id?t("b-container",{staticClass:"mt-1"},[t("b-row",[t("b-col",[t("b-form-input",{attrs:{placeholder:"Enter your name"},on:{blur:function(t){return e.marcarrta11(a.item.id-1)}},model:{value:e.rta11,callback:function(t){e.rta11=t},expression:"rta11"}})],1)],1)],1):e._e(),11!=a.item.id&&8!=a.item.id?t("b-container",[t("b-row",[t("b-col",[t("b-button",{staticClass:"mt-2",staticStyle:{"font-size":"0.8rem"},attrs:{variant:"Si"==a.item.respuesta?"dark":"outline-dark",block:""},on:{click:function(t){return e.marcar(a.item.id-1,"Si")}}},[e._v("Si")])],1),t("b-col",[t("b-button",{staticClass:"mt-2",staticStyle:{"font-size":"0.8rem"},attrs:{variant:"No"==a.item.respuesta?"dark":"outline-dark",block:""},on:{click:function(t){return e.marcar(a.item.id-1,"No")}}},[e._v("No")])],1)],1)],1):e._e()]}}],null,!1,1329263369)})],1)],1):e._e(),t("b-row",[t("b-col",[t("b-button",{staticStyle:{"font-size":"0.8rem"},attrs:{pressed:!0,type:"button",variant:"primary",block:""},on:{click:e.goStepSchedule}},[t("b-icon",{staticClass:"mr-2",attrs:{icon:"clock-history","aria-hidden":"true"}}),e._v(" Cambiar Horario")],1)],1),t("b-col",[t("b-button",{staticStyle:{"font-size":"0.8rem"},attrs:{pressed:!0,type:"button",variant:"primary",block:""},on:{click:e.goFinish}},[t("b-icon",{staticClass:"mr-2",attrs:{icon:"check","aria-hidden":"true"}}),e._v(" Confirmar")],1)],1)],1)],1)],1)},r=[],i=a("2f62"),o={name:"StepConfirmReserve",components:{},data(){return{selected:"",fields:[{key:"text",label:"Pregunta"},{key:"respuesta",label:"Respuesta"}],options:[{text:"Si",value:!1},{text:"No",value:!1}],rta8:0,rta11:0,isBussy:!1,showPreguntas:!0,errorReserve:!1}},computed:{...Object(i["c"])("users",["userData","preguntas"]),...Object(i["c"])("reserves",["idReserve","dateSelected","scheduleSelected","schedules","placeSelected","esFrotisCultivo","confirmDataReserve"]),...Object(i["c"])("places",["places"]),nomUser(){return this.userData.name+" "+this.userData.lastname},placeAdress(){var e;return null!==(e=this.placeSelected)&&void 0!==e?e:this.placeSelected+" ("+this.places.filter(e=>e.name==this.placeSelected)[0].adress+")"},reservaConfirmada(){return this.confirmDataReserve}},mounted(){""==this.userData.document&&this.$router.replace("/")},methods:{...Object(i["b"])("users",["resetUserData","createUser","updateUser"]),...Object(i["b"])("reserves",["addReserve","updateReserve","resetReserveData","getAvailabilityReserves","onReserveFail"]),async goFinish(){let e=!0;if(this.preguntas.forEach(t=>{""==t.respuesta&&"8"!=t.id&&(e=!1)}),!e)return void this.$toastr.e("Debe completar todas las respuestas","Confirmación de Reserva");let t=!1;if(this.preguntas.forEach(e=>{"Si"==e.respuesta&&"8"!=e.id&&(t=!0)}),t)return void this.$bvModal.show("modal-2");await this.getAvailabilityReserves();let a=this.schedules.filter(e=>{if(e.schedule==this.scheduleSelected)return e});a[0].state<=0?this.$toastr.e("Se ha agotado la disponibilidad para la fecha y horario seleccionados. Puede seleccionar otra fecha u horario.","Confirmación de Reserva"):(this.isBussy=!0,this.showPreguntas=!1,""==this.idReserve?this.addReserve().then(async e=>{e?(this.showModal(),await this.createUser()):(this.errorReserve=!0,await this.showModalNoReserve())}).catch(async e=>{this.errorReserve=!0,await this.showModalNoReserve()}):this.updateReserve().then(async()=>{this.showModal(),await this.updateUser()}).catch(async e=>{this.errorReserve=!0,await this.showModalNoReserve()}))},showModal(){this.isBussy=!1,this.$bvModal.show("modal-3")},showModalNoReserve(){this.isBussy=!1,this.$bvModal.show("modal-4")},goStepSchedule(){this.$router.go(-1)},marcar(e,t){this.preguntas[e].respuesta=t},marcarrta8(e){this.preguntas[e].respuesta=this.rta8},marcarrta11(e){this.preguntas[e].respuesta=this.rta11},hideModalConfirmation(){this.resetReserveData(),this.resetUserData(),this.$refs["modal-confirmation"].hide(),this.$router.replace("/")}}},n=o,l=(a("c4fd"),a("2877")),c=Object(l["a"])(n,s,r,!1,null,null,null);t["default"]=c.exports},c4fd:function(e,t,a){"use strict";a("f70d")},f70d:function(e,t,a){}}]);
//# sourceMappingURL=chunk-da4e47e6.fee63367.js.map