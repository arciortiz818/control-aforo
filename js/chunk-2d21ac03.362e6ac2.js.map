{"version":3,"sources":["webpack:///./src/views/StepSchedule.vue","webpack:///src/views/StepSchedule.vue","webpack:///./src/views/StepSchedule.vue?c61a","webpack:///./src/views/StepSchedule.vue?9e71"],"names":["render","_vm","this","_c","_self","attrs","staticStyle","_v","directives","name","rawName","value","placeSelected","expression","_s","nomUser","placeAdress","staticClass","isBussy","_e","schedules","perPage","currentPage","rowClass","fields","scopedSlots","_u","key","fn","data","item","schedule","on","$event","goStepConfirmReserve","rows","model","callback","$$v","goStepDate","staticRenderFns","components","label","computed","mapState","length","userData","lastname","places","filter","el","adress","$bvModal","show","document","$router","replace","getAvailabilityReserves","dateSelected","methods","mapActions","setReserveSchedule","push","go","type","moment","locale","initialSchedule","substring","timeForSchedule","fromNow","inPast","indexOf","state","component"],"mappings":"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","file":"js/chunk-2d21ac03.362e6ac2.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('b-modal',{attrs:{\"id\":\"modal-1\",\"title\":\"Información\",\"ok-only\":\"\",\"ok-title\":\"Aceptar\",\"no-close-on-esc\":\"\",\"no-close-on-backdrop\":\"\",\"header-bg-variant\":\"dark\",\"header-text-variant\":\"light\"}},[_c('p',{staticStyle:{\"font-size\":\"1rem\"}},[_vm._v(\" Señor usuario tenga en cuenta que si uno de sus exámenes es glicemia pre y post o curva de glicemia, debe agendar su cita solo en horario de 6:00 am - 7:00 am. \")]),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.placeSelected != 'Barrancabermeja'),expression:\"placeSelected != 'Barrancabermeja'\"}],staticStyle:{\"font-size\":\"1rem\"}},[_vm._v(\" Para la programación de Espermograma por favor seleccionar la Sede Principal Calle 45 # 29 - 55. \")]),_c('p',{staticStyle:{\"font-size\":\"1rem\"}},[_vm._v(\" Le recordamos que deberá asistir a su toma de muestra máximo 10 minutos antes de la hora asignada. \")])]),_c('b-container',[_c('b-row',[_c('b-col',[_c('h5',{staticStyle:{\"font-size\":\"1rem\"}},[_vm._v(\" \"+_vm._s(_vm.nomUser)+\", seleccione el horario que desea agendar para la sede \"),_c('b',[_vm._v(_vm._s(_vm.placeAdress))]),_vm._v(\": \")]),_c('h5',{staticStyle:{\"font-size\":\"1rem\",\"color\":\"red\"}},[_c('b',[_vm._v(\"Le recordamos que deberá asistir a su toma de muestra máximo 10 minutos antes de la hora asignada y el tiempo de atención estimado es de 30 minutos\")])])])],1),_c('b-row',{},[_c('b-col',{staticClass:\"text-center\"},[(_vm.isBussy)?_c('b-icon',{attrs:{\"icon\":\"arrow-clockwise\",\"animation\":\"spin\",\"font-scale\":\"4\"}}):_vm._e(),(!_vm.isBussy)?_c('b-table',{staticStyle:{\"font-size\":\"0.8rem\"},attrs:{\"hover\":\"\",\"bordered\":\"\",\"items\":_vm.schedules,\"per-page\":_vm.perPage,\"current-page\":_vm.currentPage,\"tbody-tr-class\":_vm.rowClass,\"fields\":_vm.fields,\"table-variant\":\"primary\",\"head-variant\":\"dark\",\"small\":\"\"},scopedSlots:_vm._u([{key:\"cell(schedule)\",fn:function(data){return [_c('b-container',[_c('b-row',[_c('b-col',{staticClass:\"pt-2\",staticStyle:{\"font-size\":\"1.2rem\"}},[_vm._v(\" \"+_vm._s(data.value)+\" \")])],1)],1)]}},{key:\"cell(state)\",fn:function(data){return [(data.value > 0)?_c('b-button',{attrs:{\"type\":\"button\",\"variant\":\"success\",\"block\":\"\",\"id\":data.item.schedule},on:{\"click\":function($event){return _vm.goStepConfirmReserve(data.item)}}},[_vm._v(\" Agendar \")]):_c('p',{staticClass:\"pt-1\"},[_c('b',[_vm._v(\"Ocupado\")])])]}}],null,false,66875466)}):_vm._e(),(_vm.rows > _vm.perPage)?_c('b-pagination',{attrs:{\"total-rows\":_vm.rows,\"per-page\":_vm.perPage,\"aria-controls\":\"my-table\",\"first-text\":\"<<\",\"prev-text\":\"<\",\"next-text\":\">\",\"last-text\":\">>\",\"pills\":\"\",\"align\":\"center\",\"small\":\"\"},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}}):_vm._e()],1)],1),_c('b-row',[_c('b-col',{staticClass:\"text-center\"},[_c('b-button',{staticStyle:{\"font-size\":\"0.8rem\"},attrs:{\"pressed\":true,\"type\":\"button\",\"variant\":\"primary\"},on:{\"click\":_vm.goStepDate}},[_c('b-icon',{staticClass:\"mr-2\",attrs:{\"icon\":\"calendar-date\",\"aria-hidden\":\"true\"}}),_vm._v(\" Cambiar Fecha\")],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <b-modal\r\n      id=\"modal-1\"\r\n      title=\"Información\"\r\n      ok-only\r\n      ok-title=\"Aceptar\"\r\n      no-close-on-esc\r\n      no-close-on-backdrop\r\n      header-bg-variant=\"dark\"\r\n      header-text-variant=\"light\"\r\n    >      \r\n      <p style=\"font-size: 1rem\">\r\n        Señor usuario tenga en cuenta que si uno de sus exámenes es glicemia pre\r\n        y post o curva de glicemia, debe agendar su cita solo en horario de 6:00\r\n        am - 7:00 am.\r\n      </p>      \r\n      <p style=\"font-size: 1rem\" v-show=\"placeSelected != 'Barrancabermeja'\">\r\n        Para la programación de Espermograma por favor seleccionar la Sede Principal Calle 45 # 29 - 55.\r\n      </p>\r\n      <p style=\"font-size: 1rem;\">\r\n        Le recordamos que deberá asistir a su toma de muestra máximo 10 minutos antes de la hora asignada.\r\n      </p>\r\n    </b-modal>\r\n    <b-container>\r\n      <b-row>\r\n        <b-col>\r\n          <h5 style=\"font-size: 1rem\">\r\n            {{ nomUser }}, seleccione el horario que desea agendar para la sede\r\n            <b>{{ placeAdress }}</b\r\n            >:\r\n          </h5>\r\n          <h5 style=\"font-size: 1rem; color: red\">\r\n            <b>Le recordamos que deberá asistir a su toma de muestra máximo 10 minutos antes de la hora asignada y el tiempo de atención estimado es de 30 minutos</b>\r\n          </h5>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row class=\"\">\r\n        <b-col class=\"text-center\">\r\n          <b-icon\r\n            icon=\"arrow-clockwise\"\r\n            animation=\"spin\"\r\n            font-scale=\"4\"\r\n            v-if=\"isBussy\"\r\n          ></b-icon>\r\n          <b-table\r\n            v-if=\"!isBussy\"\r\n            hover\r\n            bordered\r\n            :items=\"schedules\"\r\n            :per-page=\"perPage\"\r\n            :current-page=\"currentPage\"\r\n            :tbody-tr-class=\"rowClass\"\r\n            :fields=\"fields\"\r\n            table-variant=\"primary\"\r\n            head-variant=\"dark\"\r\n            small\r\n            style=\"font-size: 0.8rem\"\r\n          >\r\n            <template #cell(schedule)=\"data\">\r\n              <b-container>\r\n                <b-row>\r\n                  <b-col class=\"pt-2\" style=\"font-size: 1.2rem\">\r\n                    {{ data.value }}\r\n                  </b-col>\r\n                </b-row>\r\n              </b-container>\r\n            </template>\r\n            <template #cell(state)=\"data\">\r\n              <b-button\r\n                type=\"button\"\r\n                variant=\"success\"\r\n                v-if=\"data.value > 0\"\r\n                @click=\"goStepConfirmReserve(data.item)\"\r\n                block\r\n                :id=\"data.item.schedule\"\r\n              >\r\n                Agendar\r\n              </b-button>\r\n              <p v-else class=\"pt-1\">\r\n                <b>Ocupado</b>\r\n              </p>\r\n            </template>\r\n          </b-table>\r\n          <b-pagination\r\n            v-model=\"currentPage\"\r\n            :total-rows=\"rows\"\r\n            :per-page=\"perPage\"\r\n            aria-controls=\"my-table\"\r\n            v-if=\"rows > perPage\"\r\n            first-text=\"<<\"\r\n            prev-text=\"<\"\r\n            next-text=\">\"\r\n            last-text=\">>\"\r\n            pills\r\n            align=\"center\"\r\n            small\r\n          ></b-pagination>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col class=\"text-center\">\r\n          <b-button\r\n            :pressed=\"true\"\r\n            type=\"button\"\r\n            variant=\"primary\"\r\n            @click=\"goStepDate\"\r\n            style=\"font-size: 0.8rem\"\r\n          >\r\n            <!-- <div class=\"h5 mb-2 mt-1\"> -->\r\n            <b-icon\r\n              icon=\"calendar-date\"\r\n              aria-hidden=\"true\"\r\n              class=\"mr-2\"\r\n            ></b-icon>\r\n            <!-- </div> -->\r\n            Cambiar Fecha</b-button\r\n          >\r\n        </b-col>\r\n      </b-row>\r\n    </b-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapState } from \"vuex\";\r\nimport moment from \"moment\";\r\nexport default {\r\n  name: \"StepSchedule\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      perPage: 8,\r\n      currentPage: 1,\r\n      fields: [\r\n        { key: \"schedule\", label: \"Horario\" },\r\n        { key: \"state\", label: \"Estado\" },\r\n      ],\r\n      isBussy: false,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(\"users\", [\"userData\"]),\r\n    ...mapState(\"reserves\", [\"schedules\", \"placeSelected\", \"dateSelected\"]),\r\n    ...mapState(\"places\", [\"places\"]),\r\n    rows() {\r\n      return this.schedules.length;\r\n    },\r\n    nomUser() {\r\n      return this.userData.name + \" \" + this.userData.lastname;\r\n    },\r\n    placeAdress() {\r\n      return (\r\n        this.placeSelected +\r\n        \" (\" +\r\n        this.places.filter((el) => el.name == this.placeSelected)[0].adress +\r\n        \")\"\r\n      );\r\n    },\r\n  },\r\n  async mounted() {    \r\n    this.$bvModal.show(\"modal-1\");\r\n    if (this.userData.document == \"\") {\r\n      this.$router.replace(\"/\");\r\n    }\r\n    this.isBussy = true;\r\n\r\n    // if (this.placeSelected == \"Principal (Alianza Diagnóstica S.A.)\") {\r\n    //   this.getAvailabilityReservesPrincipal(this.dates).then((rta) => {\r\n    //     this.isBussy = false;\r\n    //   });\r\n    // }else{\r\n      await this.getAvailabilityReserves(this.dateSelected)\r\n      this.isBussy = false;\r\n    // }\r\n\r\n    // 24042021 - Comentado para ajuste de cambio de horarios\r\n    // if (this.placeSelected == \"Principal (Alianza Diagnóstica S.A.)\") {\r\n    //   this.getAvailabilityReservesPrincipal(this.dates).then((rta) => {\r\n    //     this.isBussy = false;\r\n    //   });\r\n    // } else {\r\n    //   this.getAvailabilityReserves().then((rta) => {\r\n    //     // console.log(\"rta\", this.schedules);\r\n    //     //aqui recorrer el array de horarios\r\n    //     //por cada item evaluar moment(this.schedules.schedule).fromNow();\r\n\r\n    //     this.isBussy = false;\r\n    //   });\r\n    // }\r\n  },\r\n  methods: {\r\n    ...mapActions(\"reserves\", [\r\n      \"setReserveSchedule\",\r\n      \"getAvailabilityReserves\",\r\n      \"getAvailabilityReservesPrincipal\",\r\n    ]),\r\n    goStepConfirmReserve(data) {\r\n      this.setReserveSchedule(data.schedule);\r\n      this.$router.push(\"StepConfirmReserve\");\r\n    },\r\n    goStepDate() {\r\n      this.$router.go(-1);\r\n    },\r\n    rowClass(item, type) {\r\n      moment.locale(\"es\");\r\n      if (!item || type !== \"row\") return;\r\n\r\n      let initialSchedule =\r\n        this.dateSelected + \" \" + item.schedule.substring(0, 5);\r\n      let timeForSchedule = moment(moment(initialSchedule)).fromNow();\r\n      let isMinutes = timeForSchedule.indexOf(\"minutos\");\r\n      let inPast = timeForSchedule.indexOf(\"hace\"); //>= 0 ? true : false;\r\n      let minutesToSchedule = moment(moment(initialSchedule))\r\n        .fromNow(true)\r\n        .substring(0, 2);\r\n      // let minutes =\r\n      //   typeof minutesToSchedule == \"number\" ? minutesToSchedule : 0;\r\n      if (inPast >= 0) {\r\n        if (item.state <= 0 || !item.state) {\r\n          return \"bg-danger text-white d-none\";\r\n        } else {\r\n          // document.getElementById(item.schedule).disabled = true;\r\n          return \"d-none\";\r\n        }\r\n      }\r\n      if (item.state <= 0 || !item.state) {\r\n        return \"bg-danger text-white\";\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StepSchedule.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StepSchedule.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StepSchedule.vue?vue&type=template&id=452977be&\"\nimport script from \"./StepSchedule.vue?vue&type=script&lang=js&\"\nexport * from \"./StepSchedule.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}